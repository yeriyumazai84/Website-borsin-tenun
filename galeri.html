<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üß∂ Galeri Ulos</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      background-color: #eef5ff;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    h1 {
      color: #004aad;
      margin-bottom: 10px;
    }

    input[type="text"] {
      width: 80%;
      max-width: 300px;
      padding: 8px;
      border-radius: 10px;
      border: 1px solid #aaa;
      margin-bottom: 15px;
    }

    .upload-area {
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      padding: 20px;
      display: inline-block;
      width: 90%;
      max-width: 400px;
      margin-bottom: 15px;
    }

    input[type="file"] {
      margin-top: 10px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }

    button:hover {
      background-color: #0056b3;
    }

    /* GALERI KOTAK KECIL */
    .galeri {
      margin-top: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 10px;
      flex-grow: 1;
    }

    .item {
      position: relative;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .item img {
      width: 100%;
      height: 100px;
      object-fit: cover;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .item img:hover {
      transform: scale(1.1);
    }

    .aksi {
      display: flex;
      justify-content: space-around;
      background: rgba(0,0,0,0.6);
      position: absolute;
      bottom: 0;
      width: 100%;
      padding: 5px;
      visibility: hidden;
    }

    .item:hover .aksi {
      visibility: visible;
    }

    .aksi button {
      background: rgba(255,255,255,0.85);
      color: #000;
      border: none;
      padding: 5px 8px;
      border-radius: 5px;
      font-size: 12px;
    }

    .nama {
      margin: 5px;
      font-weight: bold;
      color: #333;
      font-size: 12px;
      text-align: center;
    }

    /* FULLSCREEN */
    .fullscreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 999;
      display: none;
    }

    .fullscreen img {
      max-width: 90%;
      max-height: 85%;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(255,255,255,0.3);
    }

    .close {
      position: absolute;
      top: 20px;
      right: 30px;
      background: #ff4444;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }

    /* FOOTER */
    footer {
      margin-top: 20px;
      background: #004aad;
      color: white;
      padding: 15px;
      border-radius: 12px 12px 0 0;
    }

    footer button {
      background-color: #ff4b4b;
      border: none;
      padding: 10px 25px;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
    }

    footer button:hover {
      background-color: #d93636;
    }

    footer small {
      display: block;
      margin-top: 5px;
      color: #ddd;
    }
  </style>
</head>
<body>
  <header>
  <button onclick="window.location.href='index.html'">üè† Beranda</button>
  <h1>üß∂ Galeri Ulos</h1>
</header>

<style>
  header {
    background-color: #004aad;
    color: white;
    padding: 15px;
    text-align: center;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  header button {
    background: white;
    color: #004aad;
    border: none;
    padding: 8px 15px;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    position: absolute;
    left: 15px;
    top: 15px;
  }

  header button:hover {
    background: #e0e0e0;
  }

  /* FOOTER NAVIGASI */
  footer {
    background: #004aad;
    color: white;
    position: fixed;
    bottom: 0;
    width: 100%;
    text-align: center;
    padding: 12px 0;
    display: flex;
    justify-content: space-around;
    font-size: 16px;
    z-index: 99;
  }

  footer button {
    background: none;
    border: none;
    color: white;
    font-weight: bold;
    cursor: pointer;
    font-size: 16px;
  }

  footer button:hover {
    text-decoration: underline;
  }
</style>

  <h1>üß∂ Galeri Ulos</h1>

  <input type="text" id="pencarian" placeholder="üîç Cari nama ulos..." onkeyup="cariUlos()">

  <div class="upload-area">
    <p>Pilih foto ulos dari galeri HP kamu:</p>
    <input type="file" id="fileInput" accept="image/*" multiple onchange="tambahGambar(event)">
  </div>

  <div class="galeri" id="galeriUlos"></div>

  <!-- FULLSCREEN -->
  <div class="fullscreen" id="fullscreen">
    <button class="close" onclick="tutupFullscreen()">‚úñ</button>
    <img id="gambarFullscreen" src="">
  </div>

  <!-- FOOTER -->
  <footer>
    <p>üß∫ Jumlah foto tersimpan: <span id="jumlahFoto">0</span></p>
    <small id="terakhirUpload">Terakhir upload: -</small>
    <button onclick="hapusSemua()">üóëÔ∏è Hapus Semua</button>
  </footer>

  <script>
    const galeri = document.getElementById('galeriUlos');
    const pencarian = document.getElementById('pencarian');
    const fullscreen = document.getElementById('fullscreen');
    const gambarFullscreen = document.getElementById('gambarFullscreen');
    const jumlahFoto = document.getElementById('jumlahFoto');
    const terakhirUpload = document.getElementById('terakhirUpload');

    window.onload = function() {
      muatUlangGaleri();
    };

    function tambahGambar(event) {
      const files = event.target.files;
      let data = JSON.parse(localStorage.getItem('galeriUlos')) || [];

      for (let file of files) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const hasil = e.target.result;
          const nama = prompt("Masukkan nama ulos ini (boleh dikosongkan):") || "Ulos Tanpa Nama";
          const tanggal = new Date().toISOString();
          data.push({ src: hasil, nama: nama, tanggal: tanggal });
          localStorage.setItem('galeriUlos', JSON.stringify(data));
          muatUlangGaleri();
        };
        reader.readAsDataURL(file);
      }
    }

    function tampilkan(item, index) {
      const div = document.createElement('div');
      div.className = 'item';
      const tgl = new Date(item.tanggal).toLocaleDateString('id-ID');
      div.innerHTML = `
        <img src="${item.src}" alt="${item.nama}" onclick="bukaFullscreen('${item.src}')">
        <div class="aksi">
          <button onclick="downloadGambar('${item.src}')">‚¨áÔ∏è</button>
          <button onclick="ubahNama(${index})">‚úèÔ∏è</button>
          <button onclick="hapusGambar(${index})">üóëÔ∏è</button>
        </div>
        <div class="nama">${item.nama || "(tanpa nama)"}<br><small>${tgl}</small></div>
      `;
      galeri.appendChild(div);
    }

    function bukaFullscreen(src) {
      gambarFullscreen.src = src;
      fullscreen.style.display = 'flex';
    }

    function tutupFullscreen() {
      fullscreen.style.display = 'none';
    }

    function downloadGambar(src) {
      const link = document.createElement('a');
      link.href = src;
      link.download = 'ulos.jpg';
      link.click();
    }

    function ubahNama(index) {
      let data = JSON.parse(localStorage.getItem('galeriUlos')) || [];
      const namaBaru = prompt("Masukkan nama baru untuk ulos:", data[index].nama);
      if (namaBaru !== null) {
        data[index].nama = namaBaru;
        localStorage.setItem('galeriUlos', JSON.stringify(data));
        muatUlangGaleri();
      }
    }

    function hapusGambar(index) {
      if (confirm('Hapus gambar ini dari Galeri Ulos?')) {
        let data = JSON.parse(localStorage.getItem('galeriUlos')) || [];
        data.splice(index, 1);
        localStorage.setItem('galeriUlos', JSON.stringify(data));
        muatUlangGaleri();
      }
    }

    function hapusSemua() {
      if (confirm('Yakin ingin hapus semua gambar di Galeri Ulos?')) {
        localStorage.removeItem('galeriUlos');
        galeri.innerHTML = '';
        jumlahFoto.textContent = '0';
        terakhirUpload.textContent = 'Terakhir upload: -';
        alert('üßπ Semua gambar sudah dihapus.');
      }
    }

    function muatUlangGaleri() {
      galeri.innerHTML = '';
      const data = JSON.parse(localStorage.getItem('galeriUlos')) || [];
      data.sort((a, b) => new Date(b.tanggal) - new Date(a.tanggal));
      data.forEach((item, i) => tampilkan(item, i));
      jumlahFoto.textContent = data.length;

      if (data.length > 0) {
        const terakhir = new Date(data[0].tanggal);
        terakhirUpload.textContent = 'Terakhir upload: ' + terakhir.toLocaleDateString('id-ID', {
          day: 'numeric', month: 'long', year: 'numeric'
        });
      } else {
        terakhirUpload.textContent = 'Terakhir upload: -';
      }
    }

    function cariUlos() {
      const kata = pencarian.value.toLowerCase();
      const semua = document.querySelectorAll('.item');
      const data = JSON.parse(localStorage.getItem('galeriUlos')) || [];

      semua.forEach((item, i) => {
        const cocok = data[i].nama.toLowerCase().includes(kata);
        item.style.display = cocok ? 'block' : 'none';
      });
    }
  </script>

</body>
</html>
